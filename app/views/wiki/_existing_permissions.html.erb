<% if permissions.size != 0 %>
	<% form_for :wiki_permission, :url => { :controller => "wiki", :action => "update_wiki_page_permissions" } do |f| %>
	<input value="<%= (is_members) ? 0 : 1 %>" name="wiki_page_permission[permission_type]" type="hidden" />

<table class="list">
	<thead>
	  <th><%= l(:label_user) %></th>
	  <th><%= l(:label_role) %></th>
	  <th style="width:15%"></th>
          <%= call_hook(:view_projects_settings_members_table_header, :project => @project) %>
	</thead>
	<tbody>
	<% unless permissions.nil? %>
	<% permissions.each do |perm| %>
	
	<tr class="<%= cycle 'odd', 'even' %>">
	<% if is_members %>
	<td><%= perm.user.name %></td>
	<% else %>
	<td><%= perm.role.name %></td>
	<% end %>

    <td align="center">
    <table class="edit_permissions_table">
    <thead>
    	<tr> 
    		<th>Can't see</th>
    		<th>Can Read </th>
    		<th>and Edit </th>
    		<th>and Edit Permissions</th>
    	</tr>
    </thead>
    <tbody>
    	<tr>
    	    <% for i in 0..3 do %>
    	  <td align="center"><%= radio_button_tag("wiki_permission[#{perm.id}]", i, i == perm.level)%></td>
    		<% end %>
    	</tr>
    </tbody>
    </table>
    </td>
    <td align="center">
      <%= link_to l(:button_delete), "#{root_path}wiki/#{@project.identifier}/#{@page.title}/destroy_wiki_page_permissions?permission_id=#{perm.id}&permission_type=#{(is_members) ? 0 : 1}", :class => 'icon icon-del' %>
    </td>
    <%= call_hook(:view_projects_settings_members_table_row, { :project => @project, :member => perm}) %>
	</tr>
<% end; reset_cycle %>
<% end %>
	</tbody>
</table>
  <input id="save-permissions" type="submit" value="Save">
<% end %>
<% else %>
<p class="nodata"><%= l(:label_no_data) %></p>
<% end %>